#!/usr/bin/env php

<?php

require_once __DIR__ . '/../vendor/autoload.php';

use function cli\line;
use function cli\prompt;

function isEven($number) : string
{
    if ($number % 2 === 0){
        return 'yes';
    }

    return 'no'; 
}


line('Welcome to the Brain Game!');
$name = prompt('May I have your name?');
line("Hello, %s!", $name);
line('Answer "yes" if the number is even, otherwise answer "no".');

$numberOfRounds = 3;
$currentRound = 0;

for ($currentRound; $currentRound < $numberOfRounds; $currentRound++)
{
    $randomNumber = rand();
    line('Question: %d', $randomNumber);
    $userAnswer = prompt('Your answer');
    $correctAnswer = isEven($randomNumber);

    if ($userAnswer != $correctAnswer)
    {
        line("'%s' is wrong answer ;(. Correct anwer was '%s'.", $userAnswer, $correctAnswer);
        line("Let's try again, %s!", $name);
        break;
    }

    line('Correct!');
}

if ($currentRound === $numberOfRounds){
    line('Congratulations, %s!', $name);
}



